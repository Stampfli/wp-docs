<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>Domain Mapping 4.3.0.4: C:/Users/Aaron/OneDrive/wpms.network/CurrentSetup/wp-content/plugins/domain-mapping/classes/Domainmap/Module/Ajax/Map.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Domain Mapping 4.3.0.4
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_module_2_ajax_2_map_8php_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Map.php</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_module_2_ajax_2_map_8php.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;?php</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// +----------------------------------------------------------------------+</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// | Copyright Incsub (http://incsub.com/)                                |</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// | Based on an original by Donncha (http://ocaoimh.ie/)                 |</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// +----------------------------------------------------------------------+</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// | This program is free software; you can redistribute it and/or modify |</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// | it under the terms of the GNU General Public License, version 2, as  |</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// | published by the Free Software Foundation.                           |</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// |                                                                      |</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// | This program is distributed in the hope that it will be useful,      |</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// | but WITHOUT ANY WARRANTY; without even the implied warranty of       |</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// | MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the        |</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// | GNU General Public License for more details.                         |</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// |                                                                      |</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// | You should have received a copy of the GNU General Public License    |</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// | along with this program; if not, write to the Free Software          |</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// | Foundation, Inc., 51 Franklin St, Fifth Floor, Boston,               |</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// | MA 02110-1301 USA                                                    |</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// +----------------------------------------------------------------------+</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="class_domainmap___module___ajax___map.html">   31</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_domainmap___module___ajax___map.html">Domainmap_Module_Ajax_Map</a> <span class="keyword">extends</span> <a class="code" href="class_domainmap___module___ajax.html">Domainmap_Module_Ajax</a> {</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="class_domainmap___module___ajax___map.html#a244352f035b82b20b0efa506167fd862">   33</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="class_domainmap___module___ajax___map.html#a244352f035b82b20b0efa506167fd862">NAME</a> = __CLASS__;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="class_domainmap___module___ajax___map.html#a0832a26ad5405ac375ea2f0a1e2d41d4">   43</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_domainmap___module___ajax___map.html#a0832a26ad5405ac375ea2f0a1e2d41d4">__construct</a>( <a class="code" href="class_domainmap___plugin.html">Domainmap_Plugin</a> $plugin ) {</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        parent::__construct( $plugin );</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        <span class="comment">// add ajax actions</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        $this-&gt;<a class="code" href="class_domainmap___module.html#a9c4179e2887daa660a5c3631014246bc">_add_ajax_action</a>( <a class="code" href="class_domainmap___plugin.html#a3193b87a2614415a31b16789021428b4">Domainmap_Plugin::ACTION_MAP_DOMAIN</a>, <span class="stringliteral">&#39;map_domain&#39;</span> );</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        $this-&gt;<a class="code" href="class_domainmap___module.html#a9c4179e2887daa660a5c3631014246bc">_add_ajax_action</a>( <a class="code" href="class_domainmap___plugin.html#afebd77df73e702e868852f0aa432834c">Domainmap_Plugin::ACTION_UNMAP_DOMAIN</a>, <span class="stringliteral">&#39;unmap_domain&#39;</span> );</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        $this-&gt;<a class="code" href="class_domainmap___module.html#a9c4179e2887daa660a5c3631014246bc">_add_ajax_action</a>( <a class="code" href="class_domainmap___plugin.html#ac389eb086c6daf6e86f479394f20c5a4">Domainmap_Plugin::ACTION_HEALTH_CHECK</a>, <span class="stringliteral">&#39;check_health_status&#39;</span>, <span class="keyword">true</span>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        $this-&gt;<a class="code" href="class_domainmap___module.html#a9c4179e2887daa660a5c3631014246bc">_add_ajax_action</a>( <a class="code" href="class_domainmap___plugin.html#a2aa8435615e980dfaf2c95a8b9c0375f">Domainmap_Plugin::ACTION_HEARTBEAT_CHECK</a>, <span class="stringliteral">&#39;check_heartbeat&#39;</span>, <span class="keyword">true</span>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        $this-&gt;<a class="code" href="class_domainmap___module.html#a9c4179e2887daa660a5c3631014246bc">_add_ajax_action</a>( <a class="code" href="class_domainmap___plugin.html#acdcbd4d972342f079d732227d75e6388">Domainmap_Plugin::ACTION_SELECT_PRIMARY_DOMAIN</a>, <span class="stringliteral">&#39;select_primary_domain&#39;</span> );</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        $this-&gt;<a class="code" href="class_domainmap___module.html#a9c4179e2887daa660a5c3631014246bc">_add_ajax_action</a>( <a class="code" href="class_domainmap___plugin.html#a04954c850e178a8559194b33a4712e1a">Domainmap_Plugin::ACTION_DESELECT_PRIMARY_DOMAIN</a>, <span class="stringliteral">&#39;deselect_primary_domain&#39;</span> );</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        $this-&gt;<a class="code" href="class_domainmap___module.html#a9c4179e2887daa660a5c3631014246bc">_add_ajax_action</a>( <a class="code" href="class_domainmap___plugin.html#a8023e9a63192f1f1019f3e6a9fba4a7f">Domainmap_Plugin::ACTION_CHANGE_FRONTEND_REDIRECT</a>, <span class="stringliteral">&#39;change_frontend_mapping&#39;</span> );</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        $this-&gt;<a class="code" href="class_domainmap___module.html#a9c4179e2887daa660a5c3631014246bc">_add_ajax_action</a>( <a class="code" href="class_domainmap___plugin.html#a9e64186be2b49f4b39f9bed7fc6442aa">Domainmap_Plugin::ACTION_TOGGLE_SCHEME</a>, <span class="stringliteral">&#39;toggle_scheme&#39;</span> );</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <span class="comment">// add wpengine compatibility</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <span class="keywordflow">if</span> ( !has_action( <span class="stringliteral">&#39;domainmapping_added_domain&#39;</span> ) ) {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;            $this-&gt;<a class="code" href="class_domainmap___module.html#a2ab6f2b66e74d65003b85069b6e494d5">_add_action</a>( <span class="stringliteral">&#39;domainmapping_added_domain&#39;</span>, <span class="stringliteral">&#39;add_domain_to_wpengine&#39;</span> );</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        }</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <span class="keywordflow">if</span> ( !has_action( <span class="stringliteral">&#39;domainmapping_deleted_domain&#39;</span> ) ) {</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;            $this-&gt;<a class="code" href="class_domainmap___module.html#a2ab6f2b66e74d65003b85069b6e494d5">_add_action</a>( <span class="stringliteral">&#39;domainmapping_deleted_domain&#39;</span>, <span class="stringliteral">&#39;remove_domain_from_wpengine&#39;</span> );</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        }</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    }</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keyword">private</span> <span class="keyword">function</span> _get_domains_count() {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="keywordflow">return</span> $this-&gt;_wpdb-&gt;get_var( <span class="stringliteral">&#39;SELECT COUNT(*) FROM &#39;</span> . DOMAINMAP_TABLE_MAP . <span class="stringliteral">&#39; WHERE blog_id = &#39;</span> . intval( $this-&gt;_wpdb-&gt;blogid ) );</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    }</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keyword">private</span> <span class="keyword">function</span> _locate_wpengine_api() {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="comment">// if WPE_API doesn&#39;t exist, then try to locate it</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <span class="keywordflow">if</span> ( !class_exists( <span class="stringliteral">&#39;WPE_API&#39;</span> ) ) {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            <span class="comment">// if WPEngine is not defined, then return</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            <span class="keywordflow">if</span> ( !defined( <span class="stringliteral">&#39;WPE_PLUGIN_DIR&#39;</span> ) || !is_readable( WPE_PLUGIN_DIR . <span class="stringliteral">&#39;/class-wpeapi.php&#39;</span> ) ) {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            }</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            include_once WPE_PLUGIN_DIR . <span class="stringliteral">&#39;/class-wpeapi.php&#39;</span>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            <span class="comment">// chec whether class has been loaded</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            <span class="keywordflow">if</span> ( !class_exists( <span class="stringliteral">&#39;WPE_API&#39;</span> ) ) {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            }</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        }</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    }</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="class_domainmap___module___ajax___map.html#a64a07fe2c6088498524b31f8c708b3f6">  113</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_domainmap___module___ajax___map.html#a64a07fe2c6088498524b31f8c708b3f6">add_domain_to_wpengine</a>( $domain ) {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <span class="comment">// return if we can&#39;t locate WPEngine API class</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="keywordflow">if</span> ( !$this-&gt;_locate_wpengine_api() ) {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        }</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <span class="comment">// add domain to WPEngine</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        $api = <span class="keyword">new</span> WPE_API();</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="comment">// set the method and domain</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        $api-&gt;set_arg( <span class="stringliteral">&#39;method&#39;</span>, <span class="stringliteral">&#39;domain&#39;</span> );</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        $api-&gt;set_arg( <span class="stringliteral">&#39;domain&#39;</span>, $domain );</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="comment">// do the api request</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        $api-&gt;get();</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div>
<div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="class_domainmap___module___ajax___map.html#ad771ea02bb317054c15c17891e965765">  140</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_domainmap___module___ajax___map.html#ad771ea02bb317054c15c17891e965765">remove_domain_from_wpengine</a>( $domain ) {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="comment">// return if we can&#39;t locate WPEngine API class</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keywordflow">if</span> ( !$this-&gt;_locate_wpengine_api() ) {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="comment">// add domain to WPEngine</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        $api = <span class="keyword">new</span> WPE_API();</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="comment">// set the method and domain</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        $api-&gt;set_arg( <span class="stringliteral">&#39;method&#39;</span>, <span class="stringliteral">&#39;domain-remove&#39;</span> );</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        $api-&gt;set_arg( <span class="stringliteral">&#39;domain&#39;</span>, $domain );</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="comment">// do the api request</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        $api-&gt;get();</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    }</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div>
<div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="class_domainmap___module___ajax___map.html#a0e3e6dd35833ec82d780c4d445091bae">  164</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_domainmap___module___ajax___map.html#a0e3e6dd35833ec82d780c4d445091bae">map_domain</a>() {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        global $blog_id;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        self::_check_premissions( <a class="code" href="class_domainmap___plugin.html#a3193b87a2614415a31b16789021428b4">Domainmap_Plugin::ACTION_MAP_DOMAIN</a> );</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        $message = $hide_form = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        $domain = strtolower( trim( filter_input( INPUT_POST, <span class="stringliteral">&#39;domain&#39;</span> ) ) );</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        $scheme = strtolower( trim( filter_input( INPUT_POST, <span class="stringliteral">&#39;scheme&#39;</span> ) ) );</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        $domain = <a class="code" href="class_domainmap___punycode.html#a9e1ea6a6eaa7bb1493561d0243acaef6">Domainmap_Punycode::encode</a>( $domain );</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        $is_valid = $this-&gt;<a class="code" href="class_domainmap___module___ajax.html#ae8554ad878030b68abe2bdb93e54d9ce">_validate_domain_name</a>( $domain, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="keywordflow">if</span> ( $is_valid ) {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            <span class="comment">// check if mapped domains are 0 or multi domains are enabled</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            $count = $this-&gt;_get_domains_count();</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            $allowmulti = defined( <span class="stringliteral">&#39;DOMAINMAPPING_ALLOWMULTI&#39;</span> );</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            <span class="keywordflow">if</span> ( $count == 0 || $allowmulti ) {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                <span class="comment">// check if domain has not been mapped</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                $blog = $this-&gt;_wpdb-&gt;get_row( $this-&gt;_wpdb-&gt;prepare( <span class="stringliteral">&quot;SELECT blog_id FROM {$this-&gt;_wpdb-&gt;blogs} WHERE domain = %s AND path = &#39;/&#39;&quot;</span>, $domain ) );</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                $map = $this-&gt;_wpdb-&gt;get_row( $this-&gt;_wpdb-&gt;prepare( <span class="stringliteral">&quot;SELECT blog_id FROM &quot;</span> . DOMAINMAP_TABLE_MAP . <span class="stringliteral">&quot; WHERE domain = %s&quot;</span>, $domain ) );</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                <span class="keywordflow">if</span> ( is_null( $blog ) &amp;&amp; is_null( $map ) ) {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                    $this-&gt;_wpdb-&gt;insert( DOMAINMAP_TABLE_MAP, array(</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                        <span class="stringliteral">&#39;blog_id&#39;</span> =&gt; (<span class="keywordtype">int</span>) $blog_id,</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                        <span class="stringliteral">&#39;domain&#39;</span>  =&gt; $domain,</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                        <span class="stringliteral">&#39;active&#39;</span>  =&gt; 1,</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                        <span class="stringliteral">&quot;scheme&quot;</span> =&gt; $scheme,</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                    ), array( <span class="stringliteral">&#39;%d&#39;</span>, <span class="stringliteral">&#39;%s&#39;</span>, <span class="stringliteral">&#39;%d&#39;</span>, <span class="stringliteral">&#39;%d&#39;</span>) );</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                    <span class="keywordflow">if</span> ( $this-&gt;_plugin-&gt;get_option( <span class="stringliteral">&#39;map_verifydomain&#39;</span>, <span class="keyword">true</span> ) == <span class="keyword">false</span> || $this-&gt;<a class="code" href="class_domainmap___module.html#a7c1d7a58c85a5ae7fedf0b6663655da9">_validate_health_status</a>( $domain ) ) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                        <span class="comment">// fire the action when a new domain is added</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                        do_action( <span class="stringliteral">&#39;domainmapping_added_domain&#39;</span>, $domain, $blog_id );</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                        <span class="comment">// send success response</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                        ob_start();</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                        $row = array( <span class="stringliteral">&#39;domain&#39;</span> =&gt; $domain, <span class="stringliteral">&#39;is_primary&#39;</span> =&gt; 0 );</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                        <a class="code" href="class_domainmap___render___site___map.html#a1da2accd397cfcf6c3c650704f03337c">Domainmap_Render_Site_Map::render_mapping_row</a>( (<span class="keywordtype">object</span>)$row );</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                        wp_send_json_success( array(</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                            <span class="stringliteral">&#39;html&#39;</span>      =&gt; ob_get_clean(),</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                            <span class="stringliteral">&#39;hide_form&#39;</span> =&gt; !$allowmulti,</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                        ) );</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                        $this-&gt;_wpdb-&gt;delete( DOMAINMAP_TABLE_MAP, array( <span class="stringliteral">&#39;domain&#39;</span> =&gt; $domain ), array( <span class="stringliteral">&#39;%s&#39;</span> ) );</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                        $message = sprintf(</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                            <span class="stringliteral">&#39;&lt;b&gt;%s&lt;/b&gt;&lt;br&gt;&lt;small&gt;%s&lt;/small&gt;&#39;</span>,</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                            __( <span class="stringliteral">&#39;Domain name is unavailable to access.&#39;</span>, <span class="stringliteral">&#39;domainmap&#39;</span> ),</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                            __( <span class="stringliteral">&quot;We canâ€™t access your new domain. Mapping a new domains can take as little as 15 minutes to resolve but in some cases can take up to 72 hours, so please wait if you just bought it. If it is an existing domain and has already been fully propagated, check your DNS records are configured correctly.&quot;</span>, <span class="stringliteral">&#39;domainmap&#39;</span> )</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                        );</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                    }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                    $message = __( <span class="stringliteral">&#39;Domain is already mapped.&#39;</span>, <span class="stringliteral">&#39;domainmap&#39;</span> );</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                }</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                $message = __( <span class="stringliteral">&#39;Multiple domains are not allowed.&#39;</span>, <span class="stringliteral">&#39;domainmap&#39;</span> );</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                $hide_form = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <span class="keywordflow">if</span>( $is_valid === <span class="keyword">false</span> ){</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                $message = __( <span class="stringliteral">&#39;Domain name is invalid.&#39;</span>, <span class="stringliteral">&#39;domainmap&#39;</span> );</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                $message = __( <span class="stringliteral">&#39;Domain name is prohibited.&#39;</span>, <span class="stringliteral">&#39;domainmap&#39;</span> );</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            }</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        wp_send_json_error( array(</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            <span class="stringliteral">&#39;message&#39;</span>   =&gt; $message,</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            <span class="stringliteral">&#39;hide_form&#39;</span> =&gt; $hide_form,</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        ) );</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div>
<div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="class_domainmap___module___ajax___map.html#af01e65ce9af53b6f55ddbfc3871e93c3">  242</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_domainmap___module___ajax___map.html#af01e65ce9af53b6f55ddbfc3871e93c3">unmap_domain</a>() {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        global $blog_id;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        self::_check_premissions( <a class="code" href="class_domainmap___plugin.html#afebd77df73e702e868852f0aa432834c">Domainmap_Plugin::ACTION_UNMAP_DOMAIN</a> );</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        $show_form = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        $domain = strtolower( trim( filter_input( INPUT_GET, <span class="stringliteral">&#39;domain&#39;</span> ) ) );</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        $success = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="keywordflow">if</span> ( $this-&gt;<a class="code" href="class_domainmap___module___ajax.html#ae8554ad878030b68abe2bdb93e54d9ce">_validate_domain_name</a>( $domain ) ) {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            $success = (bool) $this-&gt;_wpdb-&gt;delete( DOMAINMAP_TABLE_MAP, array( <span class="stringliteral">&#39;domain&#39;</span> =&gt; $domain ), array( <span class="stringliteral">&#39;%s&#39;</span> ) );</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            delete_transient( <span class="stringliteral">&quot;domainmapping-{$domain}-health&quot;</span> );</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            <span class="comment">// check if we need to show form</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            $show_form = $this-&gt;_get_domains_count() == 0 || defined( <span class="stringliteral">&#39;DOMAINMAPPING_ALLOWMULTI&#39;</span> );</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            do_action( <span class="stringliteral">&#39;domainmapping_deleted_domain&#39;</span>, $domain, $blog_id);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="keywordflow">if</span>( $success ){</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            wp_send_json_success( array( <span class="stringliteral">&#39;show_form&#39;</span> =&gt; $show_form ) );</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            wp_send_json_error( array( <span class="stringliteral">&#39;show_form&#39;</span> =&gt; $show_form ) );</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div>
<div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="class_domainmap___module___ajax___map.html#aacbb5cd62f60f18b73f0a3b014c63d72">  282</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_domainmap___module___ajax___map.html#aacbb5cd62f60f18b73f0a3b014c63d72">check_health_status</a>() {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        self::_check_premissions( <a class="code" href="class_domainmap___plugin.html#ac389eb086c6daf6e86f479394f20c5a4">Domainmap_Plugin::ACTION_HEALTH_CHECK</a> );</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        $domain = strtolower( trim( filter_input( INPUT_GET, <span class="stringliteral">&#39;domain&#39;</span> ) ) );</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="keywordflow">if</span> ( !$this-&gt;<a class="code" href="class_domainmap___module___ajax.html#ae8554ad878030b68abe2bdb93e54d9ce">_validate_domain_name</a>( $domain ) ) {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            wp_send_json_error();</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        }</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        $this-&gt;<a class="code" href="class_domainmap___module.html#a702bba9e205ddab2aecbbff94298802b">set_valid_transient</a>( $domain );</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        ob_start();</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <a class="code" href="class_domainmap___render___site___map.html#af74df830f8f4b9c83b69c2d4949d02a3">Domainmap_Render_Site_Map::render_health_column</a>( $domain );</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        wp_send_json_success( array( <span class="stringliteral">&#39;html&#39;</span> =&gt; ob_get_clean() ) );</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    }</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div>
<div class="line"><a name="l00301"></a><span class="lineno"><a class="line" href="class_domainmap___module___ajax___map.html#a6feda79702a78102ab009fd8c48398a1">  301</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_domainmap___module___ajax___map.html#a6feda79702a78102ab009fd8c48398a1">check_heartbeat</a>() {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        echo filter_input( INPUT_GET, <span class="stringliteral">&#39;check&#39;</span> );</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        exit;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno"><a class="line" href="class_domainmap___module___ajax___map.html#a67ced80cec94e1396392aad615e02457">  313</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_domainmap___module___ajax___map.html#a67ced80cec94e1396392aad615e02457">select_primary_domain</a>() {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        global $blog_id;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        self::_check_premissions( <a class="code" href="class_domainmap___plugin.html#acdcbd4d972342f079d732227d75e6388">Domainmap_Plugin::ACTION_SELECT_PRIMARY_DOMAIN</a> );</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="keywordflow">if</span> ( defined( <span class="stringliteral">&#39;DOMAINMAPPING_ALLOWMULTI&#39;</span> ) &amp;&amp; filter_var( DOMAINMAPPING_ALLOWMULTI, FILTER_VALIDATE_BOOLEAN ) ) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <span class="comment">// unset all domains</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            $domain = filter_input( INPUT_GET, <span class="stringliteral">&#39;domain&#39;</span> );</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            $blog_id = $blog_id == 1 ? (int) $this-&gt;_wpdb-&gt;get_var( $this-&gt;_wpdb-&gt;prepare( <span class="stringliteral">&quot;SELECT `blog_id` FROM &quot;</span> . DOMAINMAP_TABLE_MAP .  <span class="stringliteral">&quot; WHERE `domain` = %s&quot;</span>, $domain ) ) : $blog_id;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;          <span class="keywordflow">if</span>( is_numeric($blog_id) &amp;&amp; $blog_id !== 0 )</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;          {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            $res = $this-&gt;_wpdb-&gt;update(</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                DOMAINMAP_TABLE_MAP,</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                array( <span class="stringliteral">&#39;is_primary&#39;</span> =&gt; 0 ),</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                array( <span class="stringliteral">&#39;blog_id&#39;</span> =&gt; $blog_id, <span class="stringliteral">&#39;is_primary&#39;</span> =&gt; 1 ),</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                array( <span class="stringliteral">&#39;%d&#39;</span> ),</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                array( <span class="stringliteral">&#39;%d&#39;</span>, <span class="stringliteral">&#39;%d&#39;</span> )</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            );</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            <span class="comment">// set primary domain</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            $this-&gt;_wpdb-&gt;update(</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                DOMAINMAP_TABLE_MAP,</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                array( <span class="stringliteral">&#39;is_primary&#39;</span> =&gt; 1 ),</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                array( <span class="stringliteral">&#39;domain&#39;</span> =&gt; $domain ),</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                array( <span class="stringliteral">&#39;%d&#39;</span> ),</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                array( <span class="stringliteral">&#39;%s&#39;</span> )</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            );</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;          }</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        }</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        wp_send_json_success();</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        exit;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    }</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div>
<div class="line"><a name="l00357"></a><span class="lineno"><a class="line" href="class_domainmap___module___ajax___map.html#ac3838b8746ccb6b4ff06d820ffe058ea">  357</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_domainmap___module___ajax___map.html#ac3838b8746ccb6b4ff06d820ffe058ea">deselect_primary_domain</a>() {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        global $blog_id;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        self::_check_premissions( <a class="code" href="class_domainmap___plugin.html#a04954c850e178a8559194b33a4712e1a">Domainmap_Plugin::ACTION_DESELECT_PRIMARY_DOMAIN</a> );</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="keywordflow">if</span> ( defined( <span class="stringliteral">&#39;DOMAINMAPPING_ALLOWMULTI&#39;</span> ) &amp;&amp; filter_var( DOMAINMAPPING_ALLOWMULTI, FILTER_VALIDATE_BOOLEAN ) ) {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;          $domain = filter_input( INPUT_GET, <span class="stringliteral">&#39;domain&#39;</span> );</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;          $blog_id = $blog_id == 1 ? (int) $this-&gt;_wpdb-&gt;get_var( $this-&gt;_wpdb-&gt;prepare( <span class="stringliteral">&quot;SELECT `blog_id` FROM &quot;</span> . DOMAINMAP_TABLE_MAP .  <span class="stringliteral">&quot; WHERE `domain` = %s&quot;</span>, $domain ) ) : (<span class="keywordtype">int</span>)  $blog_id;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;          <span class="comment">// deselect primary domains</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            $this-&gt;_wpdb-&gt;update(</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                DOMAINMAP_TABLE_MAP,</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                array( <span class="stringliteral">&#39;is_primary&#39;</span> =&gt; 0 ),</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                array( <span class="stringliteral">&#39;blog_id&#39;</span> =&gt; $blog_id, <span class="stringliteral">&#39;is_primary&#39;</span> =&gt; 1, <span class="stringliteral">&#39;domain&#39;</span> =&gt; $domain),</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                array( <span class="stringliteral">&#39;%d&#39;</span> ),</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                array( <span class="stringliteral">&#39;%d&#39;</span>, <span class="stringliteral">&#39;%d&#39;</span>, <span class="stringliteral">&#39;%s&#39;</span> )</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            );</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        }</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        wp_send_json_success();</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        exit;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    }</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div>
<div class="line"><a name="l00386"></a><span class="lineno"><a class="line" href="class_domainmap___module___ajax___map.html#ac35d00fdaa1d122aaf4fc6e974d9183c">  386</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_domainmap___module___ajax___map.html#ac35d00fdaa1d122aaf4fc6e974d9183c">change_frontend_mapping</a>() {</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        self::_check_premissions( <a class="code" href="class_domainmap___plugin.html#a8023e9a63192f1f1019f3e6a9fba4a7f">Domainmap_Plugin::ACTION_CHANGE_FRONTEND_REDIRECT</a> );</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        $mapping = strtolower( filter_input( INPUT_POST, <span class="stringliteral">&#39;mapping&#39;</span> ) );</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <span class="keywordflow">if</span> ( !in_array( $mapping, array( <span class="stringliteral">&#39;user&#39;</span>, <span class="stringliteral">&#39;mapped&#39;</span>, <span class="stringliteral">&#39;original&#39;</span> ) ) ) {</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            wp_send_json_error();</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        update_option( <span class="stringliteral">&#39;domainmap_frontend_mapping&#39;</span>, $mapping );</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        wp_send_json_success();</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        exit;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    }</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div>
<div class="line"><a name="l00400"></a><span class="lineno"><a class="line" href="class_domainmap___module___ajax___map.html#a842911a5aa79b40ac828a01772cde1cf">  400</a></span>&#160;   <span class="keyword">function</span> <a class="code" href="class_domainmap___module___ajax___map.html#a842911a5aa79b40ac828a01772cde1cf">toggle_scheme</a>(){</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;     self::_check_premissions( <a class="code" href="class_domainmap___plugin.html#a9e64186be2b49f4b39f9bed7fc6442aa">Domainmap_Plugin::ACTION_TOGGLE_SCHEME</a> );</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;     $domain  = $_GET[<span class="stringliteral">&#39;domain&#39;</span>];</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;     $result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;     $current_scheme = (int) $this-&gt;_wpdb-&gt;get_var( $this-&gt;_wpdb-&gt;prepare( <span class="stringliteral">&quot;SELECT `scheme` FROM &quot;</span> . DOMAINMAP_TABLE_MAP .  <span class="stringliteral">&quot; WHERE `domain` = %s&quot;</span>, $domain ) );</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;     <span class="keywordflow">if</span>( !is_null( $current_scheme ) ){</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;         $new_schema = $current_scheme == 0 ? 1 : 0;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;       $result = $this-&gt;_wpdb-&gt;update( DOMAINMAP_TABLE_MAP, array(</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;           <span class="stringliteral">&quot;scheme&quot;</span> =&gt; $new_schema ,</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;       ), array(</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;           <span class="stringliteral">&quot;domain&quot;</span> =&gt; $domain</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;       )  );</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;     }</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;     <span class="keywordflow">if</span>( $result ){</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;       wp_send_json_success(array( <span class="stringliteral">&quot;schema&quot;</span> =&gt; $new_schema ));</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;     }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;       wp_send_json_error();</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;     }</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;   }</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;}</div>
<div class="ttc" id="class_domainmap___module_html_a2ab6f2b66e74d65003b85069b6e494d5"><div class="ttname"><a href="class_domainmap___module.html#a2ab6f2b66e74d65003b85069b6e494d5">Domainmap_Module\_add_action</a></div><div class="ttdeci">_add_action($tag, $method= '', $priority=10, $accepted_args=1)</div><div class="ttdef"><b>Definition:</b> <a href="_module_8php_source.html#l00092">Module.php:92</a></div></div>
<div class="ttc" id="class_domainmap___module_html_a7c1d7a58c85a5ae7fedf0b6663655da9"><div class="ttname"><a href="class_domainmap___module.html#a7c1d7a58c85a5ae7fedf0b6663655da9">Domainmap_Module\_validate_health_status</a></div><div class="ttdeci">_validate_health_status($domain)</div><div class="ttdef"><b>Definition:</b> <a href="_module_8php_source.html#l00166">Module.php:166</a></div></div>
<div class="ttc" id="class_domainmap___plugin_html_a8023e9a63192f1f1019f3e6a9fba4a7f"><div class="ttname"><a href="class_domainmap___plugin.html#a8023e9a63192f1f1019f3e6a9fba4a7f">Domainmap_Plugin\ACTION_CHANGE_FRONTEND_REDIRECT</a></div><div class="ttdeci">const ACTION_CHANGE_FRONTEND_REDIRECT</div><div class="ttdef"><b>Definition:</b> <a href="_plugin_8php_source.html#l00041">Plugin.php:41</a></div></div>
<div class="ttc" id="class_domainmap___module___ajax___map_html_af01e65ce9af53b6f55ddbfc3871e93c3"><div class="ttname"><a href="class_domainmap___module___ajax___map.html#af01e65ce9af53b6f55ddbfc3871e93c3">Domainmap_Module_Ajax_Map\unmap_domain</a></div><div class="ttdeci">unmap_domain()</div><div class="ttdef"><b>Definition:</b> <a href="_module_2_ajax_2_map_8php_source.html#l00242">Map.php:242</a></div></div>
<div class="ttc" id="class_domainmap___plugin_html_ac389eb086c6daf6e86f479394f20c5a4"><div class="ttname"><a href="class_domainmap___plugin.html#ac389eb086c6daf6e86f479394f20c5a4">Domainmap_Plugin\ACTION_HEALTH_CHECK</a></div><div class="ttdeci">const ACTION_HEALTH_CHECK</div><div class="ttdef"><b>Definition:</b> <a href="_plugin_8php_source.html#l00045">Plugin.php:45</a></div></div>
<div class="ttc" id="class_domainmap___plugin_html_acdcbd4d972342f079d732227d75e6388"><div class="ttname"><a href="class_domainmap___plugin.html#acdcbd4d972342f079d732227d75e6388">Domainmap_Plugin\ACTION_SELECT_PRIMARY_DOMAIN</a></div><div class="ttdeci">const ACTION_SELECT_PRIMARY_DOMAIN</div><div class="ttdef"><b>Definition:</b> <a href="_plugin_8php_source.html#l00043">Plugin.php:43</a></div></div>
<div class="ttc" id="class_domainmap___module___ajax___map_html_ac3838b8746ccb6b4ff06d820ffe058ea"><div class="ttname"><a href="class_domainmap___module___ajax___map.html#ac3838b8746ccb6b4ff06d820ffe058ea">Domainmap_Module_Ajax_Map\deselect_primary_domain</a></div><div class="ttdeci">deselect_primary_domain()</div><div class="ttdef"><b>Definition:</b> <a href="_module_2_ajax_2_map_8php_source.html#l00357">Map.php:357</a></div></div>
<div class="ttc" id="class_domainmap___plugin_html_a3193b87a2614415a31b16789021428b4"><div class="ttname"><a href="class_domainmap___plugin.html#a3193b87a2614415a31b16789021428b4">Domainmap_Plugin\ACTION_MAP_DOMAIN</a></div><div class="ttdeci">const ACTION_MAP_DOMAIN</div><div class="ttdef"><b>Definition:</b> <a href="_plugin_8php_source.html#l00040">Plugin.php:40</a></div></div>
<div class="ttc" id="class_domainmap___plugin_html_a9e64186be2b49f4b39f9bed7fc6442aa"><div class="ttname"><a href="class_domainmap___plugin.html#a9e64186be2b49f4b39f9bed7fc6442aa">Domainmap_Plugin\ACTION_TOGGLE_SCHEME</a></div><div class="ttdeci">const ACTION_TOGGLE_SCHEME</div><div class="ttdef"><b>Definition:</b> <a href="_plugin_8php_source.html#l00050">Plugin.php:50</a></div></div>
<div class="ttc" id="class_domainmap___module___ajax___map_html_a64a07fe2c6088498524b31f8c708b3f6"><div class="ttname"><a href="class_domainmap___module___ajax___map.html#a64a07fe2c6088498524b31f8c708b3f6">Domainmap_Module_Ajax_Map\add_domain_to_wpengine</a></div><div class="ttdeci">add_domain_to_wpengine($domain)</div><div class="ttdef"><b>Definition:</b> <a href="_module_2_ajax_2_map_8php_source.html#l00113">Map.php:113</a></div></div>
<div class="ttc" id="class_domainmap___module___ajax___map_html_ac35d00fdaa1d122aaf4fc6e974d9183c"><div class="ttname"><a href="class_domainmap___module___ajax___map.html#ac35d00fdaa1d122aaf4fc6e974d9183c">Domainmap_Module_Ajax_Map\change_frontend_mapping</a></div><div class="ttdeci">change_frontend_mapping()</div><div class="ttdef"><b>Definition:</b> <a href="_module_2_ajax_2_map_8php_source.html#l00386">Map.php:386</a></div></div>
<div class="ttc" id="class_domainmap___module___ajax___map_html_a0e3e6dd35833ec82d780c4d445091bae"><div class="ttname"><a href="class_domainmap___module___ajax___map.html#a0e3e6dd35833ec82d780c4d445091bae">Domainmap_Module_Ajax_Map\map_domain</a></div><div class="ttdeci">map_domain()</div><div class="ttdef"><b>Definition:</b> <a href="_module_2_ajax_2_map_8php_source.html#l00164">Map.php:164</a></div></div>
<div class="ttc" id="class_domainmap___module___ajax___map_html_a67ced80cec94e1396392aad615e02457"><div class="ttname"><a href="class_domainmap___module___ajax___map.html#a67ced80cec94e1396392aad615e02457">Domainmap_Module_Ajax_Map\select_primary_domain</a></div><div class="ttdeci">select_primary_domain()</div><div class="ttdef"><b>Definition:</b> <a href="_module_2_ajax_2_map_8php_source.html#l00313">Map.php:313</a></div></div>
<div class="ttc" id="class_domainmap___module___ajax___map_html_a6feda79702a78102ab009fd8c48398a1"><div class="ttname"><a href="class_domainmap___module___ajax___map.html#a6feda79702a78102ab009fd8c48398a1">Domainmap_Module_Ajax_Map\check_heartbeat</a></div><div class="ttdeci">check_heartbeat()</div><div class="ttdef"><b>Definition:</b> <a href="_module_2_ajax_2_map_8php_source.html#l00301">Map.php:301</a></div></div>
<div class="ttc" id="class_domainmap___render___site___map_html_af74df830f8f4b9c83b69c2d4949d02a3"><div class="ttname"><a href="class_domainmap___render___site___map.html#af74df830f8f4b9c83b69c2d4949d02a3">Domainmap_Render_Site_Map\render_health_column</a></div><div class="ttdeci">static render_health_column($domain)</div><div class="ttdef"><b>Definition:</b> <a href="_render_2_site_2_map_8php_source.html#l00239">Map.php:239</a></div></div>
<div class="ttc" id="class_domainmap___module___ajax___map_html_a0832a26ad5405ac375ea2f0a1e2d41d4"><div class="ttname"><a href="class_domainmap___module___ajax___map.html#a0832a26ad5405ac375ea2f0a1e2d41d4">Domainmap_Module_Ajax_Map\__construct</a></div><div class="ttdeci">__construct(Domainmap_Plugin $plugin)</div><div class="ttdef"><b>Definition:</b> <a href="_module_2_ajax_2_map_8php_source.html#l00043">Map.php:43</a></div></div>
<div class="ttc" id="class_domainmap___module_html_a9c4179e2887daa660a5c3631014246bc"><div class="ttname"><a href="class_domainmap___module.html#a9c4179e2887daa660a5c3631014246bc">Domainmap_Module\_add_ajax_action</a></div><div class="ttdeci">_add_ajax_action($tag, $method= '', $private=true, $public=false)</div><div class="ttdef"><b>Definition:</b> <a href="_module_8php_source.html#l00109">Module.php:109</a></div></div>
<div class="ttc" id="class_domainmap___plugin_html_a2aa8435615e980dfaf2c95a8b9c0375f"><div class="ttname"><a href="class_domainmap___plugin.html#a2aa8435615e980dfaf2c95a8b9c0375f">Domainmap_Plugin\ACTION_HEARTBEAT_CHECK</a></div><div class="ttdeci">const ACTION_HEARTBEAT_CHECK</div><div class="ttdef"><b>Definition:</b> <a href="_plugin_8php_source.html#l00046">Plugin.php:46</a></div></div>
<div class="ttc" id="class_domainmap___plugin_html_a04954c850e178a8559194b33a4712e1a"><div class="ttname"><a href="class_domainmap___plugin.html#a04954c850e178a8559194b33a4712e1a">Domainmap_Plugin\ACTION_DESELECT_PRIMARY_DOMAIN</a></div><div class="ttdeci">const ACTION_DESELECT_PRIMARY_DOMAIN</div><div class="ttdef"><b>Definition:</b> <a href="_plugin_8php_source.html#l00044">Plugin.php:44</a></div></div>
<div class="ttc" id="class_domainmap___module___ajax___map_html_ad771ea02bb317054c15c17891e965765"><div class="ttname"><a href="class_domainmap___module___ajax___map.html#ad771ea02bb317054c15c17891e965765">Domainmap_Module_Ajax_Map\remove_domain_from_wpengine</a></div><div class="ttdeci">remove_domain_from_wpengine($domain)</div><div class="ttdef"><b>Definition:</b> <a href="_module_2_ajax_2_map_8php_source.html#l00140">Map.php:140</a></div></div>
<div class="ttc" id="class_domainmap___render___site___map_html_a1da2accd397cfcf6c3c650704f03337c"><div class="ttname"><a href="class_domainmap___render___site___map.html#a1da2accd397cfcf6c3c650704f03337c">Domainmap_Render_Site_Map\render_mapping_row</a></div><div class="ttdeci">static render_mapping_row($row, $schema=false)</div><div class="ttdef"><b>Definition:</b> <a href="_render_2_site_2_map_8php_source.html#l00168">Map.php:168</a></div></div>
<div class="ttc" id="class_domainmap___punycode_html_a9e1ea6a6eaa7bb1493561d0243acaef6"><div class="ttname"><a href="class_domainmap___punycode.html#a9e1ea6a6eaa7bb1493561d0243acaef6">Domainmap_Punycode\encode</a></div><div class="ttdeci">static encode($domain)</div><div class="ttdef"><b>Definition:</b> <a href="_domainmap_2_punycode_8php_source.html#l00055">Punycode.php:55</a></div></div>
<div class="ttc" id="class_domainmap___module___ajax___map_html_a842911a5aa79b40ac828a01772cde1cf"><div class="ttname"><a href="class_domainmap___module___ajax___map.html#a842911a5aa79b40ac828a01772cde1cf">Domainmap_Module_Ajax_Map\toggle_scheme</a></div><div class="ttdeci">toggle_scheme()</div><div class="ttdef"><b>Definition:</b> <a href="_module_2_ajax_2_map_8php_source.html#l00400">Map.php:400</a></div></div>
<div class="ttc" id="class_domainmap___module___ajax_html"><div class="ttname"><a href="class_domainmap___module___ajax.html">Domainmap_Module_Ajax</a></div><div class="ttdef"><b>Definition:</b> <a href="_ajax_8php_source.html#l00031">Ajax.php:31</a></div></div>
<div class="ttc" id="class_domainmap___module___ajax_html_ae8554ad878030b68abe2bdb93e54d9ce"><div class="ttname"><a href="class_domainmap___module___ajax.html#ae8554ad878030b68abe2bdb93e54d9ce">Domainmap_Module_Ajax\_validate_domain_name</a></div><div class="ttdeci">_validate_domain_name($domain, $mapping=false)</div><div class="ttdef"><b>Definition:</b> <a href="_ajax_8php_source.html#l00044">Ajax.php:44</a></div></div>
<div class="ttc" id="class_domainmap___module___ajax___map_html"><div class="ttname"><a href="class_domainmap___module___ajax___map.html">Domainmap_Module_Ajax_Map</a></div><div class="ttdef"><b>Definition:</b> <a href="_module_2_ajax_2_map_8php_source.html#l00031">Map.php:31</a></div></div>
<div class="ttc" id="class_domainmap___plugin_html_afebd77df73e702e868852f0aa432834c"><div class="ttname"><a href="class_domainmap___plugin.html#afebd77df73e702e868852f0aa432834c">Domainmap_Plugin\ACTION_UNMAP_DOMAIN</a></div><div class="ttdeci">const ACTION_UNMAP_DOMAIN</div><div class="ttdef"><b>Definition:</b> <a href="_plugin_8php_source.html#l00042">Plugin.php:42</a></div></div>
<div class="ttc" id="class_domainmap___plugin_html"><div class="ttname"><a href="class_domainmap___plugin.html">Domainmap_Plugin</a></div><div class="ttdef"><b>Definition:</b> <a href="_plugin_8php_source.html#l00029">Plugin.php:29</a></div></div>
<div class="ttc" id="class_domainmap___module___ajax___map_html_a244352f035b82b20b0efa506167fd862"><div class="ttname"><a href="class_domainmap___module___ajax___map.html#a244352f035b82b20b0efa506167fd862">Domainmap_Module_Ajax_Map\NAME</a></div><div class="ttdeci">const NAME</div><div class="ttdef"><b>Definition:</b> <a href="_module_2_ajax_2_map_8php_source.html#l00033">Map.php:33</a></div></div>
<div class="ttc" id="class_domainmap___module_html_a702bba9e205ddab2aecbbff94298802b"><div class="ttname"><a href="class_domainmap___module.html#a702bba9e205ddab2aecbbff94298802b">Domainmap_Module\set_valid_transient</a></div><div class="ttdeci">set_valid_transient($domain, $status=null)</div><div class="ttdef"><b>Definition:</b> <a href="_module_8php_source.html#l00310">Module.php:310</a></div></div>
<div class="ttc" id="class_domainmap___module___ajax___map_html_aacbb5cd62f60f18b73f0a3b014c63d72"><div class="ttname"><a href="class_domainmap___module___ajax___map.html#aacbb5cd62f60f18b73f0a3b014c63d72">Domainmap_Module_Ajax_Map\check_health_status</a></div><div class="ttdeci">check_health_status()</div><div class="ttdef"><b>Definition:</b> <a href="_module_2_ajax_2_map_8php_source.html#l00282">Map.php:282</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_0560c4a4c6149ff4802773baa71c0d22.html">OneDrive</a></li><li class="navelem"><a class="el" href="dir_2118a8f33e94722cef96827f3801fee3.html">wpms.network</a></li><li class="navelem"><a class="el" href="dir_8943648afa701a01942f58e6b8f8f698.html">CurrentSetup</a></li><li class="navelem"><a class="el" href="dir_f802b33df1f3bf73960f7b6a01d62693.html">wp-content</a></li><li class="navelem"><a class="el" href="dir_d458f8ab865d077adc9c10df3001dda7.html">plugins</a></li><li class="navelem"><a class="el" href="dir_843128821777c4d026ade0567c7bff1d.html">domain-mapping</a></li><li class="navelem"><a class="el" href="dir_16146d95df0c9964b7e228d6e9003139.html">classes</a></li><li class="navelem"><a class="el" href="dir_4522f486459d1765a14585148fe27356.html">Domainmap</a></li><li class="navelem"><a class="el" href="dir_17f3c1ab06a51406f3d012f50aaaf571.html">Module</a></li><li class="navelem"><a class="el" href="dir_1f39eb4c25f23093afa9b836bf002847.html">Ajax</a></li><li class="navelem"><a class="el" href="_module_2_ajax_2_map_8php.html">Map.php</a></li>
    <li class="footer">Generated on Sun Mar 1 2015 15:16:45 for Domain Mapping 4.3.0.4 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
